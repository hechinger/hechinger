{% extends "layout.twig" %}


{% block navbar %}
  {% include 'components/nav-bar.twig' with { css_class: "site-header--hp" } %}
{% endblock %}


{% block body %}
  <div class="l-content">

    <!-- Homepage Zone 1 -->
    <!-- ===================================== -->
    {% block hp_zone1 %}
      <div class="l-hp-zone">

        <!-- hp main feature -->
        <div class="hp-feat-mod">
          {% include "/templates/components/tease-hp-main.twig" with { post: home.get_zone(1)[0], context_class: 'feat-lg', css_class: home.get_zone(1)[0].thumbnail.src ? 'tz-hp-feat--main tz-hp-feat--main-img' : 'tz-hp-feat--main' } %}
        </div>

        <!-- hp top -->
        <div class="hp-top-mod">
          <div class="l-zone-dos--rule">

            <!-- top featured stories -->
            <div class="grid-item">
              <div class="hp-top-feat-mod">
                {% for post in home.get_zone(1)|slice(1) %}
                  {% if loop.index == 1 %}
                    {% include "/templates/components/tease-hp-regular.twig" with { context_class: "reg-lg", css_class: 'tz-hp-reg' } %}
                  {% else %}
                    {% include "/templates/components/tease-hp-regular.twig" with { context_class: "reg-lg", css_class: 'tz-hp-reg', hide_image: true } %}
                  {% endif %}
                {% endfor %}
              </div> <!-- /hp-zone1-feat-mod -->
            </div> <!-- /grid-item -->

            <!-- /latest news feed -->
            <div class="grid-item">
              {% if latest_posts|length %}
                {% include "/templates/components/tease-list-latest.twig" %}
              {% endif %}
            </div> <!-- /grid-item -->

          </div> <!-- /l-zone-dos--rule -->
        </div> <!-- /hp-latest-mod -->
      </div> <!-- /l-hp-zone -->

    {% endblock hp_zone1 %}


    <!-- Homepage Zone Special Reports -->
    <!-- ===================================== -->
    {% block hp_reports %}
      <div class="l-hp-zone l-hp-zone--reports">
        <div class="l-zone-dos">
          {% for report in special_reports %}
            {% if report.slug in ['california', 'common-core', 'higher-education', 'mississippi-learning'] %}
              <div class="grid-item">
                <div class="hp-special-tz">
                  {% include "templates/components/tease-hp-report.twig" with { report:report } %}
                </div> <!-- /hp-special-tz -->
              </div> <!-- /grid-item -->
            {% endif %}
          {% endfor %}
        </div> <!-- /l-zone-dos -->
      </div> <!-- l-hp-zone l-hp-zone--reports" -->
    {% endblock hp_reports %}


    <!-- Homepage Zone 2 -->
    <!-- ===================================== -->
    {% block hp_zone2 %}
      <div class="l-hp-zone">

        <!-- Zone 2 Top -->
        <div class="hp-zone--top">
          <div class="l-zone-tres--rule">
            {% for post in home.get_zone(2)|slice(0,3) %}
              <div class="grid-item {{ loop.index > 1 ? 'sub-grid-item' }}">
                {# TODO: change hide image logic when we have context class for image tease #}
                {% include "/templates/components/tease-hp-stub.twig" with { context_class: 'stub-lg', css_class: 'tz-hp-stub', hide_image: loop.index > 1 ? true : true } %}
              </div>
            {% endfor %}
          </div> <!-- /l-zone-tres--rule -->
        </div> <!-- /hp-zone--top -->

        {#  ZONE 2 TOP WITH IMAGE #}
        {# Chris: I just duplicated the entire hp-zone--top area and changed a couple things. I changed the get zone slice from 3 to 2 and changed the class that's added to the second grid item. The thing I could figure out was how to hide the image on the very first tease #}
        <!-- Zone 2 Top If there are images -->
        <div class="hp-zone--top">
          <div class="l-zone-tres--rule">
            {% for post in home.get_zone(2)|slice(0,2) %}
              <div class="grid-item {{ loop.index > 1 ? 'extra-grid-item' }}">
                {# TODO: change hide image logic when we have context class for image tease #}
                {% include "/templates/components/tease-hp-stub.twig" with { context_class: 'stub-lg', css_class: 'tz-hp-stub', hide_image: loop.index > 1 ? false : false } %}
              </div>
            {% endfor %}
          </div> <!-- /l-zone-tres--rule -->
        </div> <!-- /hp-zone--top -->
        {# END ZONE 2 TOP WITH IMAGE #}


        <!-- Zone 2 Middle -->
        {% if z2_quote|length %}
          <div class="hp-zone--middle">
            {% include "/templates/components/tease-special.twig" with { quote: z2_quote, show_stat: z2_quote.show_stat, css_class: 'tz-special-stat tz-special' } %}
          </div>
        {% endif %}

        <!-- Zone 2 Bottom -->
        <div class="hp-zone--bottom">
          <div class="l-zone-cuatro--rule">
            {% for post in home.get_zone(2)|slice(3,4) %}
              <div class="grid-item">
                {% include "/templates/components/tease-hp-stub.twig" with { context_class: 'stub-med', hide_image: true } %}
              </div>
            {% endfor %}
          </div> <!-- /l-zone-cuatro--rule -->
        </div> <!-- /hp-zone-bottom -->


        {#  ZONE 2 BOTTOM WITH IMAGE #}
        {# Chris: I just duplicated the entire hp-zone--bottom area and changed a couple things. I changed the layout class to l-zone-tres-art. I changed the slice from 4 to 3. #}
         <div class="hp-zone--bottom">
          <div class="l-zone-tres--art">
            {% for post in home.get_zone(2)|slice(3,3) %}
              {% if loop.index < 2 %}
                <div class="grid-item extra-grid-item">
                  {% include "/templates/components/tease-hp-stub.twig" with { context_class: 'stub-med', hide_image: false } %}
                </div>
                {% else %}
                  <div class="grid-item">
                    {% include "/templates/components/tease-hp-stub.twig" with { context_class: 'stub-med', hide_image: true } %}
                  </div> <!-- /grid-item -->
              {% endif %}

            {% endfor %}
          </div> <!-- /l-zone-cuatro--rule -->
        </div> <!-- /hp-zone-bottom -->
        {#  END ZONE 2 BOTTOM WITH IMAGE #}



      </div> <!-- /l-hp-zone -->
    {% endblock hp_zone2 %}


    <!-- Homepage Featured -->
    <!-- ===================================== -->
    {% block hp_zone_feat %}
      <div class="l-hp-zone l-hp-zone--feat">
        {% include "/templates/components/tease-hp-second-feat.twig" with { feature: second_feature } %}
      </div> <!-- /l-hp-zone--feat -->
    {% endblock hp_zone_feat %}


    <!-- Homepage Zone 3 -->
    <!-- ===================================== -->
    {% block hp_zone3 %}
      <div class="l-hp-zone">

        <!-- Zone 3 Top -->
        <div class="hp-zone--top">
            <div class="l-zone-dos--split">

              <!-- Zone 3 Top Left side -->
              <div class="top-grid-item top-grid-item--left">
                {% include "/templates/components/tease-hp-regular.twig" with { post: home.get_zone(3)[0], context_class: 'reg-med'} %}
              </div> <!-- /top-grid-item -->

              <!-- Zone 3 Top Right side -->
              <div class="top-grid-item top-grid-item--right">
                <div class="l-zone-dos--split-inside">
                  {% for post in home.get_zone(3)|slice(1,2) %}
                    <div class="grid-item">
                      {% include "/templates/components/tease-hp-regular.twig" with {context_class: 'reg-med', hide_image: false } %}
                      {# grant changed the hide_image variable to false #}
                    </div> <!-- /grid-item -->
                  {% endfor %}
                </div> <!-- /l-zone-dos--split-inside -->

                {% if z3_quote|length %}
                  <div class="top-grid-item--right-lower">
                    <div class="hp-zone--middle">
                      {% include "/templates/components/tease-special.twig" with { quote: z3_quote, show_stat: z3_quote.show_stat, css_class: 'tz-special-stat tz-special' } %}
                    </div>
                  </div> <!-- /grid-item-lower -->
                {% endif %}

              </div> <!-- /top-grid-item top-grid-item--right -->
            </div> <!--/l-zone-dos--split -->
        </div> <!-- /hp-zone--top -->

        <!-- Zone 3 Bottom -->
        <div class="hp-zone--bottom">
          <div class="l-zone-tres--rule">
            {% for post in home.get_zone(3)|slice(3,3) %}
              <div class="grid-item {{ loop.index > 1 ? 'sub-grid-item' }}">
                {% include "/templates/components/tease-hp-regular.twig" with { context_class: 'reg-med', hide_image: true } %}
              </div>
            {% endfor %}
          </div> <!-- /l-zone-tres -->
        </div> <!-- /hp-zone--bottom -->

      </div> <!-- /l-hp-zone -->
    {% endblock hp_zone3 %}

  </div> <!-- /l-content -->

{% endblock body %}
